/* -*-c++-*- */

// Defines the date type.
//
// SPI has its own representation of dates (spi::Date) but it is unlikely that
// you will be using this representation in your own library.
//
// Hence we need to convert between the outer type (spi::Date) and the inner
// type (in this case Date).
//
// Note that spi::Date is implemented as an offset from some base date, and
// the same base date is used by Date.
//
// Hence the translation code is very simple.

%module dateType;

// these header files are used in the implementation
// they are not visible to the client

#include <date.hpp>

/**
 * Defines the Date class.
 */
typedef date Date <::Date>
    typedef="class" noDoc=True
{
    convert_in(date)
    {
        return ::Date((int)date);
    }

    convert_out(date)
    {
        return spi::Date((int)date);
    }
};

/** Constructs a date from year, month and day using the Gregorian calendar.
 *
 * Validates that the combination is valid.
 */
extern Date Date(
    /** Year A.D. - usually with 4 digits */
    int year, 
    /** Month - 1 = January, 12 = December etc. */
    int month,
    /** Day of the month, from 1 to 31. It is an error to use a number more
        than the days in the particular month. */
    int day) noLog=True
{
    return ::Date(year, month, day);
}

